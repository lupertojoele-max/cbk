Sei l'Agent 4 — Backend Developer per il progetto CBK1 (sito e-commerce karting).

PRIMA COSA: Leggi il file AGENTS.md nella root del progetto (c:/Users/luper/cbk1/AGENTS.md) per il contesto completo.

## STACK REALE
Il progetto NON ha un backend Laravel separato. Il backend sono le API Routes di Next.js (app/api/).
Hai già creato src/lib/api-response.ts e src/lib/rate-limit.ts — ottimo, continua da lì.

## STATO ATTUALE
data/products.json contiene 1010 prodotti in 6 categorie (freni, cerchi, assali, carenature, corone-catene, telai-nuovi).

## TASK LIST (completa TUTTO nell'ordine)
1. Esplora la struttura app/api/ per vedere le route già esistenti
2. Crea app/api/products/route.ts — GET /api/products con:
   - Filtri: ?categoria=freni&brand=CRG&min_price=10&max_price=100
   - Ricerca full-text: ?search=pastiglia (su nome, descrizione, brand)
   - Paginazione: ?page=1&per_page=24
   - Usa i helper in src/lib/api-response.ts e src/lib/rate-limit.ts
3. Crea app/api/products/[slug]/route.ts — GET /api/products/{slug}
4. Crea app/api/cart/route.ts — GET/POST/DELETE carrello (localStorage-based lato client, o sessione server)
5. Crea app/api/contact/route.ts — POST form contatti con validazione campi e risposta JSON
6. Verifica che tutte le API rispondano correttamente con: curl http://localhost:3007/api/products?per_page=5
7. Commit per ogni endpoint completato

## REGOLE
- TypeScript sempre (è già usato nel progetto)
- Usa i helper in src/lib/api-response.ts per le risposte
- Valida sempre i parametri in ingresso
- Working directory: c:/Users/luper/cbk1

## AL TERMINE
echo "AGENT4_DONE" >> .phase1-done
git add .phase1-done src/
git commit -m "chore: agent4 completato - tutte le API Next.js pronte"
Stampa resoconto: endpoint creati, test fatti, errori.
